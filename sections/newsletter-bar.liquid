{%- if section.settings.show_newsletterbar -%}
    <section id="newsletter-bar" class="footer-position" data-section-id="{{ section.id }}" data-section-settings="{{ section_settings }}" data-section-type="newsletter-bar">
        <div class="container">
            <div class="row-fluid">
                <div class="newsletter">
                    <div class="newsletter-title">
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="m87 24h-62c-4.4 0-8 3.6-8 8v3c0 1.1.9 2 2 2s2-.9 2-2v-3c0-.4.1-.8.2-1.2l22.4 19.2-22.4 19.2c-.1-.4-.2-.8-.2-1.2v-3c0-1.1-.9-2-2-2s-2 .9-2 2v3c0 4.4 3.6 8 8 8h62c4.4 0 8-3.6 8-8v-36c0-4.4-3.6-8-8-8zm-62.8 4.1c.2-.1.5-.1.8-.1h62c.3 0 .6 0 .8.1l-30.5 26.1c-.8.6-1.8.6-2.6 0zm62.8 43.9h-62c-.3 0-.6 0-.8-.1l22.5-19.3 5.4 4.7c1.1 1 2.5 1.5 3.9 1.5s2.8-.5 3.9-1.5l5.4-4.7 22.5 19.3c-.2.1-.5.1-.8.1zm4-4c0 .4-.1.8-.2 1.2l-22.4-19.2 22.4-19.2c.1.4.2.8.2 1.2zm-80-23c0-1.1.9-2 2-2h12c1.1 0 2 .9 2 2s-.9 2-2 2h-12c-1.1 0-2-.9-2-2zm14 12h-18c-1.1 0-2-.9-2-2s.9-2 2-2h18c1.1 0 2 .9 2 2s-.9 2-2 2z"/></svg>
                        <span>
                            {{ section.settings.description }}
                        </span>
                    </div>
                    <div class="newsletter-content">

                        {%- assign newsletter_id = 'newsletter-' | append: section.id -%}

                        {%- form 'customer', id: newsletter_id, class: 'form newsletter-register d-flex' -%}
                            {%- if form.posted_successfully? -%}
                                <p class="alert alert--success">{{ 'footer.newsletter.success' | t }}</p>
                            {%- else -%}
                                {%- if form.errors -%}
                                    <p class="alert alert--error">{{ form.errors.messages['email'] }}</p>
                                {%- endif -%}

                                <input type="hidden" name="contact[tags]" value="newsletter">

                                <input type="email" id="newsletter[{{ section.id }}][contact][email]" name="contact[email]" class="form__field form__field--text" placeholder="{{ section.settings.input_placeholder }}" required>
                                <button type="submit" class="newsletter-signature" aria-label="{{ section.settings.texto_botao }}">{{ section.settings.button_text }}</button>
                            {%- endif -%}
                        {%- endform -%}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <style>
        #newsletter-bar {
            background: {{ section.settings.background_color }};
        }

        #newsletter-bar .newsletter-title {
            color: {{ section.settings.title_color }};
        }

        #newsletter-bar .newsletter-title svg {
            fill: {{ section.settings.icon_color }};
        }

        #newsletter-bar .newsletter-signature {
            background: {{ section.settings.button_color }};
            color: {{ section.settings.button_text_color }};
        }
    </style>
{%- endif -%}

{% schema %}
{
  "name": "Newsletter",
  "class": "overflow-hidden",
  "settings": [
        {
          "type": "checkbox",
          "id": "show_newsletterbar",
          "label": "Mostrar newsletter",
          "default": true
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Descrição",
          "default": "Ganhe 10% de desconto na sua primeira compra!"
        },
        {
          "type": "text",
          "id": "input_placeholder",
          "label": "Texto indicativo do campo",
          "default": "Digite seu e-mail"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Texto do botão",
          "default": "Cadastrar"
        },
        {
          "type": "header",
          "content": "Cores"
        },
        {
          "type": "color",
          "id": "background_color",
          "label": "Cor do fundo",
          "default": "#2C2438"
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Cor do título",
          "default": "#FFFFFF"
        },
        {
          "type": "color",
          "id": "button_color",
          "label": "Cor do botão",
          "default": "#45EC7F"
        },
        {
          "type": "color",
          "id": "button_text_color",
          "label": "Cor do texto do botão",
          "default": "#2C2438"
        },
        {
          "type": "color",
          "id": "icon_color",
          "label": "Cor do icone",
          "default": "#45EC7F"
        }
    ]
}
{% endschema %}